---
layout: default
title: QR2Web Inventory - Scan
---
<script>
    
    function createButtonNode(image, link, text)
    {
        var span = document.createElement("div");
        span.setAttribute("class", "btn");
        span.setAttribute("style", "width:100px;height:100px;display:inline-table;");
        var a = document.createElement("a");
        a.setAttribute("href", link);
        a.setAttribute("target", "_blank");
        var img = document.createElement("img");
        img.setAttribute("src", image);
        img.setAttribute("style", "width:64px;");
        var txt = document.createTextNode(text);
        var br = document.createElement("br");
        a.appendChild(img);
        a.appendChild(br);
        a.appendChild(txt);
        span.appendChild(a);
        return span;
    }

	function onscan(qrCode)
    {
	    var qrCodeString = "" + qrCode;

	    document.getElementById('scannedResult').value = qrCode;
	    if (qrCodeString.length > 13)
	        document.getElementById('scannedResult').style.fontsize = (30 - parseInt((qrCodeString.length - 14) / 3)) + "px";
	    else
	        document.getElementById('scannedResult').style.fontsize = 30;

	    while (document.getElementById("buttons").hasChildNodes())
	    {
	        document.getElementById("buttons").removeChild(document.getElementById("buttons").childNodes[0]);
	    }

		if (qrCodeString.indexOf("http") === 0 || qrCodeString.indexOf("www.") === 0)
		{
		    var span = createButtonNode("images/b_url.png", qrCodeString, "Open URL");
		    document.getElementById("buttons").appendChild(span);
		}

		if (qrCodeString.indexOf("smsto:") === 0 || qrCodeString.indexOf("SMSTO:") === 0)
		{
		    var phone = qrCodeString.substring(6);
		    if (phone.indexOf(":") > 0)
		    {
		        var message = phone.substring(phone.indexOf(":") + 1);
		        phone = phone.substring(0, phone.indexOf(":"));
		        var span = createButtonNode("images/b_sms.png", "sms://" + phone + "?body=" + encodeURI(message), "send SMS");
		        document.getElementById("buttons").appendChild(span);
		    }
		}

		if (qrCodeString.indexOf("tel:") === 0 || qrCodeString.indexOf("TEL:") === 0)
		{
		    var span = createButtonNode("images/b_call.png", qrCodeString, "Phone Call");
		    document.getElementById("buttons").appendChild(span);
		}

		if (qrCodeString.indexOf("matmsg:") === 0 || qrCodeString.indexOf("MATMSG:") === 0)
		{
		    var newString = qrCodeString.substring(7);
		    var mailto = "";
		    var mailsub = "";
		    var mailbody = "";
		    if (qrCodeString.indexOf("to:") > 0 && qrCodeString.indexOf(";sub:") > 0)
		    {
		        mailto = qrCodeString.substring(qrCodeString.indexOf("to:") + 3, qrCodeString.indexOf(";sub:"));
		        mailsub = qrCodeString.substring(qrCodeString.indexOf(";sub:") + 4, qrCodeString.indexOf(";body:"));
		        mailbody = qrCodeString.substring(qrCodeString.indexOf(";body:") + 6);
		        mailbody.trimRight(";");
		    }
		    var span = createButtonNode("images/b_email.png", "mailto:" + mailto + "?subject=" + encodeURI(mailsub) + "&body=" + encodeURI(mailbody), "Send Mail");
		    document.getElementById("buttons").appendChild(span);
		}
        
		if (qrCodeString.indexOf("geo:") === 0 || qrCodeString.indexOf("GEO:") === 0)
		{
		    //var geo = qrCodeString.substring(4);
		    //var lat = geo.substring(0, phone.indexOf(":"));
		    //var lon = geo.substring(phone.indexOf(":") + 1);
		    //var span = createButtonNode("images/b_sms.png", "sms://" + phone + "?body=" + encodeURI(message), "send SMS");
		    var span = createButtonNode("images/b_maps.png", qrCodeString, "View on Map");
		    document.getElementById("buttons").appendChild(span);
		}
        
        if(Number(qrCodeString) > 1000)
        {
        	var span = createButtonNode("images/b_search.png", "http://www.upcitemdb.com/upc/" + qrCodeString, "UPC ItemDB");
		    document.getElementById("buttons").appendChild(span);
            
            span = createButtonNode("images/b_search.png", "https://www.upcdatabase.com/item/" + qrCodeString, "UPC Database");
		    document.getElementById("buttons").appendChild(span);
            
            span = createButtonNode("images/b_search.png", "https://www.barcodelookup.com/" + qrCodeString, "Barcode Lookup");
		    document.getElementById("buttons").appendChild(span);
        }
	}

</script>
<div class="blurb">
	<h1>QR to WEB Inventory</h1>
	<table style='width:100%;height:68px;line-height:10px;'>
		<tr>
			<td>
				<input 
				       type='text' 
				       id='scannedResult' 
				       name='scanResult' 
				       value='scan...'
				       style='width:100%;height:40px;font-size:30px;border-radius:4px;text-align:center;'
				       />
			</td>
			<td>
				<a href='qr2web:/scan'>
					<img src='images/scan.png' style='height:64px;'>
				</a>
			</td>
		</tr>
   	</table>
    
	<span style='overflow:auto;display:block;height:50vh;' id='span'>
		<hr style='width:50%' />
    <div id="buttons" style="text-align:center;display:table;margin:0 auto;">


    </div>
    	<div style='display:none;'><a href='https://www.barcodelookup.com/' id='barcodelookup' target='_blank' >SEARCH ON www.BarcodeLookup.com</a></div>
    	<div style='display:none;'><a href='' id='weblink' target='_blank' >OPEN LINK</a></div>
    	<br>
  	<h2>AND NOW?</h2>
	<a href="https://github.com/Adrianotiger/qr2web/" target="_blank">
		Visit the GitHub page
	</a>
	<br>
	<a href="https://github.com/Adrianotiger/qr2web/wiki" target="_blank">
                Develop your own webpage
        </a>
        <br>
	</span>
	
</div>
